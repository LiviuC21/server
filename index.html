<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Server Liviu</title>
    <style>
        body { background-color: #121212; color: white; font-family: sans-serif; text-align: center; padding: 20px; }
        .card { border: 2px solid #444; border-radius: 15px; padding: 20px; margin: 20px auto; max-width: 450px; background: #1a1a1a; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin: 5px; }
        .btn-green { background: #2ecc71; color: white; width: 90%; }
        input { width: 90%; padding: 10px; margin: 10px 0; border-radius: 5px; border: none; }
        .status-msg { color: #f1c40f; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>

    <div id="mainCard" class="card" style="border-color: #c0392b;">
        <h1 id="statusEmoji">ğŸ”´</h1>
        <h2 id="statusText">SERVER OFFLINE</h2>
        <a href="http://100.84.134.45:8081" target="_blank" style="background:#f1c40f; color:black; padding:10px; display:block; text-decoration:none; width:80%; margin: 10px auto; border-radius:10px;">ğŸ“‚ INTRÄ‚ PE SERVER</a>
    </div>

    <div class="card">
        <h3>ğŸµ YouTube Downloader</h3>
        <input type="text" id="ytUrl" placeholder="Link YouTube...">
        <button onclick="descarca('mp3')" style="background:#e74c3c; color:white;" class="btn">MP3</button>
        <button onclick="descarca('mp4')" style="background:#3498db; color:white;" class="btn">MP4</button>
    </div>

    <div class="card">
        <h3>ğŸ–¼ï¸ Imagine Ã®n PDF</h3>
        <input type="file" id="imageInput" multiple accept="image/*">
        <button class="btn btn-green" onclick="uploadImages()">CONVERTEÈ˜TE</button>
        <p id="statusImage" class="status-msg"></p>
    </div>

    <div class="card">
        <h3>ğŸ“ Scanner AI (OCR)</h3>
        <input type="file" id="ocrInput" accept="application/pdf">
        <button class="btn btn-green" onclick="uploadOCR()">SCANEAZÄ‚ PDF</button>
        <p id="statusOCR" class="status-msg"></p>
    </div>

    <script>
        const SERVER_IP = "100.84.134.45";
        const PORT_REMOTE = "9000";
        const PORT_DL = "9001";

        function descarca(format) {
            const url = document.getElementById('ytUrl').value;
            if(!url) return alert("Pune un link!");
            window.location.href = `http://${SERVER_IP}:${PORT_DL}/download?url=${url}&format=${format}`;
        }

        function uploadImages() {
            const input = document.getElementById('imageInput');
            const status = document.getElementById('statusImage');
            if (input.files.length === 0) return alert("Alege poze!");
            const formData = new FormData();
            for (let file of input.files) { formData.append("files", file); }
            status.innerText = "â³ Se trimite la portul 9000...";
            fetch(`http://${SERVER_IP}:${PORT_REMOTE}/convert-images`, { method: 'POST', body: formData })
            .then(res => res.text()).then(data => { status.innerText = "âœ… Gata! VerificÄƒ folderul JPG_TO_PDF"; })
            .catch(err => { status.innerText = "âŒ Eroare: " + err; });
        }

        function uploadOCR() {
            const input = document.getElementById('ocrInput');
            const status = document.getElementById('statusOCR');
            if (input.files.length === 0) return alert("Alege un PDF!");
            const formData = new FormData();
            formData.append("pdf", input.files[0]);
            status.innerText = "ğŸ§  AI-ul lucreazÄƒ... AÈ™teaptÄƒ.";
            fetch(`http://${SERVER_IP}:${PORT_REMOTE}/ocr-scan`, { method: 'POST', body: formData })
            .then(res => res.text()).then(data => { status.innerText = "âœ… Scanare terminatÄƒ!"; })
            .catch(err => { status.innerText = "âŒ Eroare AI: " + err; });
        }
    </script>
</body>
</html>
