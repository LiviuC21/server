// SetÄƒm porturile conform specificaÈ›iilor tale
const REMOTE_PORT = "9000"; // Telecomanda & Conversii
const DOWNLOAD_PORT = "9001"; // Doar YouTube
const SERVER_IP = "100.84.134.45";

// 1. YouTube Downloader (Port 9001)
function descarca(format) {
    const url = document.getElementById('ytUrl').value;
    if(!url) return alert("Pune un link!");
    document.getElementById('dlStatus').style.display = "block";
    document.getElementById('dlStatus').innerText = "â³ Se proceseazÄƒ pe portul 9001...";
    window.location.href = `http://${SERVER_IP}:${DOWNLOAD_PORT}/download?url=${url}&format=${format}`;
}

// 2. Upload Imagini -> PDF (Port 9000)
function uploadImages() {
    const input = document.getElementById('imageInput');
    const status = document.getElementById('statusImage');
    if (input.files.length === 0) return alert("SelecteazÄƒ pozele!");

    const formData = new FormData();
    for (let file of input.files) { formData.append("files", file); }

    status.innerText = "â³ Se trimite la portul 9000...";
    
    fetch(`http://${SERVER_IP}:${REMOTE_PORT}/convert-images`, {
        method: 'POST',
        body: formData
    })
    .then(res => res.text())
    .then(data => { status.innerText = "âœ… PDF Creat Ã®n folderul JPG_TO_PDF!"; })
    .catch(err => { status.innerText = "âŒ Eroare: " + err; });
}

// 3. OCR Scanner (Port 9000)
function uploadOCR() {
    const input = document.getElementById('ocrInput');
    const status = document.getElementById('statusOCR');
    if (input.files.length === 0) return alert("SelecteazÄƒ PDF-ul!");

    const formData = new FormData();
    formData.append("pdf", input.files[0]);

    status.innerText = "ğŸ§  AI-ul lucreazÄƒ la portul 9000... AÈ™teaptÄƒ.";
    
    fetch(`http://${SERVER_IP}:${REMOTE_PORT}/ocr-scan`, {
        method: 'POST',
        body: formData
    })
    .then(res => res.text())
    .then(data => { status.innerText = "âœ… Text extras Ã®n folderul OCR!"; })
    .catch(err => { status.innerText = "âŒ Eroare AI: " + err; });
}
